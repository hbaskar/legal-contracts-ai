# Azure Function File Upload Service - Production Configuration Template
# This template should be customized for production deployment
# Store sensitive values in Azure Key Vault and reference them appropriately

# === AZURE FUNCTIONS CORE SETTINGS ===
AzureWebJobsStorage=DefaultEndpointsProtocol=https;AccountName=STORAGE_ACCOUNT_NAME;AccountKey=STORAGE_ACCOUNT_KEY;EndpointSuffix=core.windows.net
FUNCTIONS_WORKER_RUNTIME=python
AzureWebJobsFeatureFlags=EnableWorkerIndexing
PYTHON_ISOLATE_WORKER_DEPENDENCIES=1

# === AZURE STORAGE CONFIGURATION ===
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=STORAGE_ACCOUNT_NAME;AccountKey=STORAGE_ACCOUNT_KEY;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_NAME=uploads

# === DATABASE CONFIGURATION ===
DATABASE_TYPE=azuresql

# === AZURE SQL CONFIGURATION ===
# RECOMMENDED: Use managed identity for production
AZURE_SQL_AUTH_METHOD=managed_identity
AZURE_SQL_SERVER=your_server.database.windows.net
AZURE_SQL_DATABASE=your_database_name

# For user-assigned managed identity (optional)
# AZURE_SQL_MANAGED_IDENTITY_CLIENT_ID=your_user_assigned_mi_client_id

# Alternative: Azure AD Password (less secure)
# AZURE_SQL_AUTH_METHOD=ad_password
# AZURE_SQL_USERNAME=your_service_account@domain.com
# AZURE_SQL_PASSWORD=your_password_or_keyvault_reference

# === AI SERVICES CONFIGURATION ===
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com/
AZURE_OPENAI_KEY=@Microsoft.KeyVault(SecretUri=https://your-keyvault.vault.azure.net/secrets/openai-key/)
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_MODEL_DEPLOYMENT=gpt-4o-cms
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

AZURE_SEARCH_ENDPOINT=https://your-search-service.search.windows.net
AZURE_SEARCH_KEY=@Microsoft.KeyVault(SecretUri=https://your-keyvault.vault.azure.net/secrets/search-key/)
AZURE_SEARCH_DOC_INDEX=rag_doc-index

# === DOCUMENT PROCESSING CONFIGURATION ===
DEFAULT_CHUNKING_METHOD=intelligent

# === PRODUCTION SETTINGS ===
MAX_FILE_SIZE_MB=500
DEFAULT_SAS_EXPIRY_HOURS=1
LOG_LEVEL=INFO

# === PRODUCTION SECURITY NOTES ===
# 1. Use Azure Key Vault for all sensitive values
# 2. Enable managed identity for the Function App
# 3. Configure firewall rules for SQL Database
# 4. Use private endpoints where possible
# 5. Enable Application Insights for monitoring
# 6. Configure appropriate RBAC permissions
# 7. Enable Azure Defender for security monitoring